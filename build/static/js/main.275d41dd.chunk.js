(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){e.exports=n(181)},142:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var i=n(14),o=n.n(i),a=n(95),r=n.n(a),d=(n(142),n(97)),l=n(131),_=n(132),s=n(136),c=n(133),u=n(135),p=n(50),h=n(134),q=n(32),g=n.n(q),m=n(96),f=n.n(m),v=(n(175),n(177),n(179),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).updateWindowDimensions=function(){n.setState(Object(d.a)({},n.state,{height:window.innerHeight}))},n.onSelectionChanged=function(e){console.log("onSelectionChanged")},n.onGridReady=function(e){console.log("onGridReady")},n.state={gridOptions:{context:{componentParent:Object(p.a)(Object(p.a)(n))}},columnDefs:n.createColumnDefs(),defaultColDef:{width:100},rowSelection:"single",localeText:{noRowsToShow:"Ninguna fila que mostrar todavia"},page:{current:1,last:1},height:window.innerHeight,data:null},n}return Object(u.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions);var t=new f.a.Map({container:this.mapContainer,style:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",center:[-3.706467,40.455674],zoom:9,dragRotate:!1}),n=new f.a.NavigationControl({showCompass:!1});t.addControl(n,"bottom-right"),g.a.setDefaultAuth({user:"udasaas",apiKey:"GAriSM2Lxn8xxv5HRl2sWQ"});var i=new g.a.source.SQL("SELECT geo.name, ind.cartodb_id, ind.category_id, ind.i_a, ind.y_r_qq, ind.y_s_qq, ind.o_a_qq, ind.s_t_qq, ind.n_viv_norm, ind.i_u_qq_rk, ind.id, ind.n_eda, ind.n_viv, ind.o_a, ind.o_pm, ind.o_pu, ind.o_pu_qq, ind.o_u, ind.o_u_qq, ind.o_u_qq_rk, ind.operation, ind.p_e_ter, ind.p_ed_39, ind.p_viv_pp, ind.p_viv_vac, ind.pa_edu_c, ind.pa_edu_g, ind.pa_ocio, ind.pa_p, ind.pa_tp, ind.r_d_rk, ind.r_g, ind.r_s_rk, ind.r_t_rk, ind.renthog_06_13_m, ind.s_fn, ind.s_p, ind.s_pc, ind.s_t, ind.s_u, ind.s_u_qq, ind.s_u_qq_rk, ind.viv_edad_efc, ind.y_r, ind.y_s, geo.the_geom, geo.the_geom_webmercator FROM udasaas.geo_boundary_geometry as geo INNER JOIN udasaas.rgi ind on geo.id = ind.id WHERE ( (ind.type=13 and ind.l_10='Espa\xf1a') or (ind.type=13 and ind.l_10='Italia') or (ind.type=13 and ind.l_10='Peru') ) and ind.category_id is null and ind.operation = 1"),o=g.a.expressions,a=new g.a.Viz({color:o.rgba(204,204,204,.75),strokeWidth:2,variables:{list:o.viewportFeatures(o.prop("cartodb_id"),o.prop("name"),o.prop("i_a"),o.prop("y_r_qq"),o.prop("y_s_qq"),o.prop("o_a_qq"),o.prop("s_t_qq"),o.prop("n_viv_norm"),o.prop("i_u_qq_rk"),o.prop("n_eda"),o.prop("n_viv"),o.prop("o_u_qq_rk")),name:o.prop("name")}}),r=new g.a.Layer("myLayer",i,a);r.addTo(t);var l=new g.a.Interactivity(r),_=null;l.on("featureEnter",function(e){e.features.forEach(function(e){e.id!==_&&(e.color.blendTo("opacity(DeepPink, 0.5)",50),e.strokeWidth.blendTo("3",50),e.strokeColor.blendTo("opacity(white, 0.9)",50))})}),l.on("featureLeave",function(e){e.features.forEach(function(e){e.id!==_&&(e.color.reset(50),e.strokeWidth.reset(50),e.strokeColor.reset(50))})}),l.on("featureClick",function(t){if(t.features.length){var n=t.features[0];_=n.id,n.color.blendTo("opacity(LimeGreen, 0.5)",50),console.log(e.state.data);var i=e;console.log(e.state.gridOptions.api.getModel().getRowCount()),e.state.gridOptions.api.forEachNode(function(e,t){if(n.id===e.data.cartodb_id)return e.setSelected(!0,!1),void i.state.gridOptions.api.ensureIndexVisible(t,"top")})}}),l.on("featureClickOut",function(e){if(e.features.length){var t=e.features[0];_="",t.color.reset(50)}}),r.on("updated",function(){console.log("updated")}),r.on("loaded",function(){console.log("loaded");var t=[];a.variables.list.value.forEach(function(e){t.push({rownumber:t.length+1,cartodb_id:e.cartodb_id,name:e.name,i_a:e.i_a,y_r_qq:e.y_r_qq,y_s_qq:e.y_s_qq,o_a_qq:e.o_a_qq,s_t_qq:e.s_t_qq,n_viv_norm:e.n_viv_norm,i_u_qq_rk:e.i_u_qq_rk,n_eda:e.n_eda,n_viv:e.n_viv,o_u_qq_rk:e.o_u_qq_rk})}),e.setState(Object(d.a)({},e.state,{data:t}))})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"createColumnDefs",value:function(){return[{field:"rownumber",headerName:"#",cellStyle:{textAlign:"center"}},{field:"cartodb_id",headerName:"ID",cellStyle:{textAlign:"center"}},{field:"name",headerName:"Name",width:300,cellStyle:{textAlign:"center",fontWeight:"bold"}},{field:"i_a",headerName:"i_a",cellStyle:{textAlign:"center"}},{field:"y_r_qq",headerName:"y_r_qq",cellStyle:{textAlign:"center"}},{field:"y_s_qq",headerName:"y_s_qq",cellStyle:{textAlign:"center"}},{field:"o_a_qq",headerName:"o_a_qq",cellStyle:{textAlign:"center"}},{field:"s_t_qq",headerName:"s_t_qq",cellStyle:{textAlign:"center"}},{field:"n_viv_norm",headerName:"n_viv_norm",cellStyle:{textAlign:"center"}},{field:"i_u_qq_rk",headerName:"i_u_qq_rk",cellStyle:{textAlign:"center"}},{field:"n_eda",headerName:"n_eda",cellStyle:{textAlign:"center"}},{field:"n_viv",headerName:"n_viv",cellStyle:{textAlign:"center"}},{field:"o_u_qq_rk",headerName:"o_u_qq_rk",cellStyle:{textAlign:"center"}}]}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{height:this.state.height}},o.a.createElement("div",{ref:function(t){return e.mapContainer=t},style:{height:"50%",width:"100%"}}),o.a.createElement("div",{style:{height:"50%"}},o.a.createElement("div",{style:{boxSizing:"border-box",width:"100%",height:"100%",overflowX:"scroll"},className:"ag-theme-material"},o.a.createElement(h.AgGridReact,{id:"cartovl_urban",columnDefs:this.state.columnDefs,defaultColDef:this.state.defaultColDef,rowSelection:this.state.rowSelection,rowData:this.state.data,enableSorting:!0,localeText:this.state.localeText,enableColResize:!0,gridOptions:this.state.gridOptions,onGridReady:this.onGridReady,onSelectionChanged:this.onSelectionChanged}))))}}]),t}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,2,1]]]);
//# sourceMappingURL=main.275d41dd.chunk.js.map